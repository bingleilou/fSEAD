#ifndef RSHASH_GENERATOR_1_H_
#define RSHASH_GENERATOR_1_H_

#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>
#include "ap_int.h"
#include "ap_fixed.h"
#include "hls_stream.h"
#include "hls_math.h"
#define W_WIDTH 32
#define I_WIDTH 16
typedef ap_fixed<W_WIDTH,I_WIDTH> interface_t;
    
typedef ap_fixed<32,16> accum_t;
typedef ap_fixed<32,16> param_t;
typedef ap_fixed<32,16> score_t;
typedef ap_uint<16> const_t;
typedef ap_uint<8> char_t;

struct DataBus_IN {
    float data;
    ap_uint<1> last;
};

struct DataBus_OUT {
    float data;
    ap_uint<1> last;
};
    
void rshash_http1_c6(
    hls::stream<DataBus_IN> &data,
    hls::stream<DataBus_OUT> &score_rshash
);
    
#define ENSEMBLE 25
#define DIM_MAX 3
#define BATCH_SIZE 128
#define HASH_NUM 2
#define MATRIX_COL 128
const static param_t bottom_rshash = -6.727058836573144;
const static param_t delta_rshash = 0.14865337501781295;
static param_t rshash_f[25] = {2.4363738880748,8.433784730188657,1.1921375028866654,2.0673468743171237,8.611223475329846,1.708605212227475,1.1819332261294644,6.756011464410598,1.6821983970566563,1.5087304867934899,2.7014324206742573,2.6132361143725564,1.3024269159204716,1.2291305222363074,1.0999225818937033,7.186380532897257,1.344899910097829,1.463113526539607,1.577837131020367,1.4950221153905183,1.4173493462358346,4.563704804205657,2.2720386125361998,2.738692030869454,1.1345168966277275};

static param_t rshash_alpha[25][3] = {{0.26759274062344995,0.27045432105679784,0.19641116805150452},
{0.07051909235553523,0.02296951634290189,0.04703765111326015},
{0.12796655154532754,0.09439525109207143,7.579120569109798e-05},
{0.29201307868946136,0.1345806413015329,0.1091486132555329},
{0.044152342508336245,0.08377223101540468,0.08028847260473489},
{0.1254020121343851,0.11055138154566234,0.5424997919312118},
{0.3478442719842413,0.4740286938717784,0.2720302801150636},
{0.14106802728685533,0.057611492954371915,0.0366124745153116},
{0.3818125773058506,0.14140166198023638,0.4163654119687093},
{0.585896199349389,0.6578563599264051,0.6118048682937408},
{0.08103471155247863,0.35890864638705616,0.23689612657473225},
{0.13045207942975237,0.31847708711696576,0.06775626983225147},
{0.32009004516018513,0.023925962443005287,0.6383708390650814},
{0.4234108496700585,0.058549886339399095,0.39160988828735305},
{0.25573047351585065,0.7554943944709729,0.5490858448494516},
{0.06270080642974803,0.07697647565440748,0.08078333246698773},
{0.47095102384802406,0.5097811780484479,0.4636525750279432},
{0.4034060991159575,0.3895599575821813,0.6707274350353164},
{0.005191715650516441,0.06843087250082332,0.13811047646566726},
{0.4731118646058546,0.45606937525069924,0.6041843596176949},
{0.06444312086086419,0.45586434987347346,0.2372181816980448},
{0.052011902599822586,0.05978098037465082,0.2009577691659727},
{0.3125751615581579,0.3258968475053372,0.25136770591587737},
{0.28690729428390194,0.051647982245516685,0.08363750883497667},
{0.17177247202290724,0.5560757621433092,0.07526832549796304}};
static param_t rshash_min_X[3] = {-2.3025850929940455,-2.3025850929940455,-2.3025850929940455};
static param_t rshash_delta_X[3] = {0.09614502352502724,0.07570437288699758,0.053820455935644385};

const static score_t log_LUT_rshash[128] = {-0.0,-1.0,-1.584962500721156,-2.0,-2.321928094887362,-2.584962500721156,-2.807354922057604,-3.0,-3.169925001442312,-3.321928094887362,-3.4594316186372973,-3.584962500721156,-3.700439718141092,-3.807354922057604,-3.9068905956085187,-4.0,-4.087462841250339,-4.169925001442312,-4.247927513443585,-4.321928094887363,-4.392317422778761,-4.459431618637297,-4.523561956057013,-4.584962500721156,-4.643856189774724,-4.700439718141092,-4.754887502163468,-4.807354922057604,-4.857980995127572,-4.906890595608519,-4.954196310386875,-5.0,-5.044394119358453,-5.087462841250339,-5.129283016944966,-5.169925001442312,-5.20945336562895,-5.247927513443585,-5.285402218862249,-5.321928094887363,-5.357552004618084,-5.392317422778761,-5.426264754702098,-5.459431618637297,-5.491853096329675,-5.523561956057013,-5.554588851677638,-5.584962500721156,-5.614709844115208,-5.643856189774724,-5.672425341971495,-5.700439718141092,-5.727920454563199,-5.754887502163468,-5.78135971352466,-5.807354922057604,-5.832890014164741,-5.857980995127572,-5.882643049361842,-5.906890595608519,-5.930737337562887,-5.954196310386875,-5.977279923499917,-6.0,-6.022367813028454,-6.044394119358453,-6.066089190457772,-6.087462841250339,-6.108524456778169,-6.129283016944966,-6.149747119504682,-6.169925001442312,-6.189824558880018,-6.20945336562895,-6.22881869049588,-6.247927513443585,-6.266786540694901,-6.285402218862249,-6.303780748177103,-6.321928094887363,-6.339850002884624,-6.357552004618084,-6.3750394313469245,-6.392317422778761,-6.409390936137702,-6.426264754702098,-6.442943495848728,-6.459431618637297,-6.475733430966398,-6.491853096329675,-6.507794640198696,-6.523561956057013,-6.539158811108031,-6.554588851677638,-6.569855608330948,-6.584962500721156,-6.599912842187128,-6.614709844115208,-6.6293566200796095,-6.643856189774724,-6.658211482751795,-6.672425341971495,-6.6865005271832185,-6.700439718141092,-6.714245517666122,-6.727920454563199,-6.7414669864011465,-6.754887502163468,-6.768184324776926,-6.78135971352466,-6.794415866350106,-6.807354922057604,-6.820178962415188,-6.832890014164741,-6.845490050944375,-6.857980995127572,-6.870364719583405,-6.882643049361842,-6.894817763307944,-6.906890595608519,-6.918863237274595,-6.930737337562887,-6.94251450533924,-6.954196310386875,-6.965784284662087,-6.977279923499917,-6.9886846867721655,-7.0};
#endif